COMPARACI√ìN DE ESQUEMA PRISMA - VIEJO VS ACTUAL
===============================================

1. TABLA PROVIDERS
------------------
ANTES:
- Campos: id, name, rif, balance, is_active, created_at
- Relaciones: provider_contacts[], provider_invoices[]

AHORA:
- Campos: id, name, rif, is_active, created_at
- Relaciones: provider_contacts[], provider_invoices[]
- ‚ùå balance eliminado

-----------------------------------------------

2. TABLA PROVIDER_INVOICES
--------------------------
ANTES:
- Campos: id, provider_id, control_number, invoice_number, invoice_date, total_amount, created_at
- Relaciones: provider (FK), purchase_invoices[], expenses[]

AHORA:
- Campos: id, provider_id, control_number, invoice_number, invoice_date, subtotal, total_amount, status (enum), created_at
- Relaciones: provider (FK), expenses[], invoice_taxes[]
- ‚ùå purchase_invoices eliminado
- ‚ûï campo subtotal
- ‚ûï campo status (enum InvoiceStatus: pendiente, cancelado, pagado)
- ‚ûï relaci√≥n con invoice_taxes

-----------------------------------------------

3. TABLA INVOICE_TAXES
----------------------
ANTES:
- ‚ùå No exist√≠a

AHORA:
- Campos: id, provider_invoice_id, code, name, percentage, amount, created_at
- Relaci√≥n: provider_invoices (FK)
- ‚ûï Nueva tabla para desglose de impuestos por factura

-----------------------------------------------

4. TABLA EXPENSES
-----------------
ANTES:
- Campos: id, id_expense_type, provider_invoice_id, description, total, created_at
- Relaciones: expense_types (FK), provider_invoices (FK)

AHORA:
- Campos: id, provider_invoice_id, description, subtotal, taxes, total, created_at
- Relaci√≥n: provider_invoices (FK)
- ‚ùå id_expense_type eliminado
- ‚ûï campos subtotal y taxes
- ‚ûï desglose completo de gasto

-----------------------------------------------

5. TABLA PURCHASE_INVOICES
--------------------------
ANTES:
- Exist√≠a con relaci√≥n a provider_invoices y expense_types
- Campos: id, provider_invoice_id, expense_type_id, purchase_date, description, exempt_amount, total_amount, created_at
- Relaci√≥n: purchase_invoices_retentions[]

AHORA:
- ‚ùå Eliminada

-----------------------------------------------

6. TABLAS DE RETENCIONES
------------------------
ANTES:
- Exist√≠an retentions, purchase_invoices_retentions, services_retentions, payrolls_retentions
- Usadas para vincular retenciones con compras, servicios y n√≥minas

AHORA:
- ‚ùå Eliminadas
- ‚ûï Retenciones ahora se manejan directamente en invoice_taxes

-----------------------------------------------

7. TABLA EXPENSE_TYPES
----------------------
ANTES:
- Exist√≠a para clasificar gastos
- Campos: id, name, description, created_at
- Relaci√≥n: purchase_invoices[], expenses[]

AHORA:
- ‚ùå Eliminada

-----------------------------------------------

8. ENUM INVOICESTATUS
---------------------
ANTES:
- ‚ùå No exist√≠a

AHORA:
- ‚ûï Enum InvoiceStatus con valores: pendiente, cancelado, pagado

-----------------------------------------------

RESUMEN FINAL
-------------
- ‚ùå Eliminados: balance en providers, purchase_invoices, purchase_invoices_retentions, services_retentions, payrolls_retentions, expense_types
- ‚ûï A√±adidos: invoice_taxes, subtotal y status en provider_invoices, desglose (subtotal, taxes, total) en expenses, enum InvoiceStatus
- üîÑ Simplificaci√≥n: las retenciones y tipos de gasto ahora se manejan directamente en invoice_taxes y expenses
- ‚úÖ Consistencia: todas las relaciones mantienen onDelete: Cascade y soft delete con is_active

===============================================
FIN DEL DOCUMENTO COMPARATIVO
===============================================

DOCUMENTACI√ìN DE ENDPOINTS - PROVIDER & PROVIDER_INVOICES
=========================================================

PROVEEDORES (provider)
----------------------
POST    http://localhost:3000/api/trans/services/provider
Body:
{
  "name": "Proveedor Ejemplo",
  "rif": "J-12345678-9",
  "is_active": true,
  "contacts": [
    { "contact_info": "proveedor@example.com" },
    { "contact_info": "+58-412-1234567" }
  ]
}

GET     http://localhost:3000/api/trans/services/provider
üëâ Lista todos los proveedores activos.

GET     http://localhost:3000/api/trans/services/provider/:id
üëâ Obtiene un proveedor espec√≠fico por ID.

GET     http://localhost:3000/api/trans/services/provider/search/:name
üëâ Busca proveedores activos por nombre.

GET     http://localhost:3000/api/trans/services/provider/inactive/search/:name
üëâ Busca proveedores inactivos por nombre.

PATCH   http://localhost:3000/api/trans/services/provider/:id
Body:
{
  "name": "Proveedor Actualizado",
  "rif": "J-98765432-1",
  "contacts": [
    { "contact_info": "nuevo@example.com" }
  ]
}

DELETE  http://localhost:3000/api/trans/services/provider/:id
üëâ Elimina proveedor (soft delete).

GET     http://localhost:3000/api/trans/services/provider/deleted
üëâ Lista proveedores eliminados.

PUT     http://localhost:3000/api/trans/services/provider/restore/:id
üëâ Restaura proveedor eliminado (solo por ID, sin body).

---------------------------------------------------------

FACTURAS DE PROVEEDOR (provider_invoices)
-----------------------------------------
POST    http://localhost:3000/api/trans/services/provider-invoice/:provider_id
Body:
{
  "control_number": "CN-001",
  "invoice_number": "INV-001",
  "invoice_date": "2025-11-25",
  "subtotal": 1000,
  "taxes": [
    { "code": "IVA", "name": "Impuesto al Valor Agregado", "percentage": 16 },
    { "code": "ISLR", "name": "Impuesto Sobre la Renta", "percentage": 5 }
  ]
}

GET     http://localhost:3000/api/trans/services/provider-invoices
üëâ Lista todas las facturas activas.

GET     http://localhost:3000/api/trans/services/provider-invoices/provider/:provider_id
üëâ Lista facturas de un proveedor espec√≠fico.

GET     http://localhost:3000/api/trans/services/provider-invoices-range?start=YYYY-MM-DD&end=YYYY-MM-DD
üëâ Filtra facturas por rango de fechas.

GET     http://localhost:3000/api/trans/services/provider-invoices/search/:value
üëâ Busca factura por n√∫mero fiscal o control.

GET     http://localhost:3000/api/trans/services/provider-invoices-deleted
üëâ Lista facturas eliminadas (soft delete).

PUT     http://localhost:3000/api/trans/services/provider-invoice/restore/:id
üëâ Restaura factura eliminada (solo por ID, sin body).

DELETE  http://localhost:3000/api/trans/services/provider-invoice/:id
üëâ Elimina factura (soft delete).

GET     http://localhost:3000/api/trans/services/provider-invoices/:id/full
üëâ Consulta factura completa con impuestos y gasto autom√°tico.

=========================================================
FIN DEL DOCUMENTO ACTUALIZADO
=========================================================
