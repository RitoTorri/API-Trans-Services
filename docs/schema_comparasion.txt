COMPARACI√ìN DE ESQUEMA PRISMA - VIEJO VS ACTUAL
===============================================

1. TABLA PROVIDERS
------------------
ANTES:
- Campos: id, name, rif, balance, is_active, created_at
- Relaciones: provider_contacts[], provider_invoices[]

AHORA:
- Campos: id, name, rif, is_active, created_at
- Relaciones: provider_contacts[], provider_invoices[]
- ‚ùå balance eliminado

-----------------------------------------------

2. TABLA PROVIDER_INVOICES
--------------------------
ANTES:
- Campos: id, provider_id, control_number, invoice_number, invoice_date, total_amount, created_at
- Relaciones: provider (FK), purchase_invoices[], expenses[]

AHORA:
- Campos: id, provider_id, control_number, invoice_number, invoice_date, subtotal, total_amount, status (enum), created_at
- Relaciones: provider (FK), expenses[], invoice_taxes[], provider_invoices_retentions[]
- ‚ùå purchase_invoices eliminado
- ‚ûï campo subtotal
- ‚ûï campo status (enum InvoiceStatus: pendiente, cancelado, pagado)
- ‚ûï relaci√≥n con invoice_taxes
- ‚ûï relaci√≥n con provider_invoices_retentions

-----------------------------------------------

3. TABLA INVOICE_TAXES
----------------------
ANTES:
- ‚ùå No exist√≠a

AHORA:
- Campos: id, provider_invoice_id, code, name, percentage, amount, created_at
- Relaci√≥n: provider_invoices (FK)
- ‚ûï Nueva tabla para desglose de impuestos por factura

-----------------------------------------------

4. TABLA EXPENSES
-----------------
ANTES:
- Campos: id, id_expense_type, provider_invoice_id, description, total, created_at
- Relaciones: expense_types (FK), provider_invoices (FK)

AHORA:
- Campos: id, id_expense_type, description, total, created_at
- Relaci√≥n: expense_types (FK)
- ‚ùå relaci√≥n directa con provider_invoices eliminada
- ‚ùå provider_invoice_id eliminado como campo obligatorio
- üîÑ ahora los gastos se vinculan indirectamente v√≠a l√≥gica de negocio

-----------------------------------------------

5. TABLA PURCHASE_INVOICES
--------------------------
ANTES:
- Exist√≠a con relaci√≥n a provider_invoices y expense_types
- Campos: id, provider_invoice_id, expense_type_id, purchase_date, description, exempt_amount, total_amount, created_at
- Relaci√≥n: purchase_invoices_retentions[]

AHORA:
- ‚ùå Eliminada

-----------------------------------------------

6. TABLAS DE RETENCIONES
------------------------
ANTES:
- Exist√≠an retentions, purchase_invoices_retentions, services_retentions, payrolls_retentions
- Usadas para vincular retenciones con compras, servicios y n√≥minas

AHORA:
- ‚ûï Se mantiene tabla retentions
- ‚ûï Se mantiene provider_invoices_retentions y services_retentions, payrolls_retentions
- üîÑ En la versi√≥n actual las retenciones se aplican directamente a facturas de proveedores y servicios, no a compras

-----------------------------------------------

7. TABLA EXPENSE_TYPES
----------------------
ANTES:
- Exist√≠a para clasificar gastos
- Campos: id, name, description, created_at
- Relaci√≥n: purchase_invoices[], expenses[]

AHORA:
- Se mantiene
- Campos: id, name, description, created_at
- Relaci√≥n: expenses[]
- ‚ùå relaci√≥n con purchase_invoices eliminada

-----------------------------------------------

8. ENUM INVOICESTATUS
---------------------
ANTES:
- ‚ùå No exist√≠a

AHORA:
- ‚ûï Enum InvoiceStatus con valores: pendiente, cancelado, pagado

-----------------------------------------------

RESUMEN FINAL
-------------
- ‚ùå Eliminados: balance en providers, purchase_invoices, relaci√≥n directa de expenses con provider_invoices.
- ‚ûï A√±adidos: invoice_taxes, campo subtotal y status en provider_invoices, enum InvoiceStatus.
- üîÑ Simplificaci√≥n: las retenciones y tipos de gasto se manejan directamente en provider_invoices_retentions, services_retentions y payrolls_retentions.
- ‚úÖ Consistencia: todas las relaciones mantienen onDelete: Cascade y soft delete con is_active.
